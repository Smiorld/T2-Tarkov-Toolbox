# T2 å¡”ç§‘å¤«å·¥å…·ç®± - é¡¹ç›®æ¶æ„è§„åˆ’

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

T2 Tarkov Toolbox æ˜¯ä¸€ä¸ªé›†æˆå¤šä¸ªå®ç”¨å·¥å…·çš„æœ¬åœ°æ¡Œé¢åº”ç”¨ï¼Œä¸“ä¸ºã€Šé€ƒç¦»å¡”ç§‘å¤«ã€‹æ¸¸æˆç©å®¶è®¾è®¡ã€‚

## ğŸ“¦ åŠŸèƒ½æ¨¡å—

### 1. å±å¹•æ»¤é•œ (Screen Filter) âœ… å·²å®ç°

**åŠŸèƒ½æè¿°**ï¼š
- å®æ—¶è°ƒæ•´å±å¹•äº®åº¦ã€ä¼½é©¬ã€å¯¹æ¯”åº¦å’ŒRGBé€šé“
- é¢„è®¾ç®¡ç†ï¼ˆé»˜è®¤ã€ç™½å¤©ã€å¤œé—´ï¼‰
- å…¨å±€å¿«æ·é”®æ”¯æŒï¼ˆF2/F3/F4ï¼‰
- å¤šæ˜¾ç¤ºå™¨æ”¯æŒ

**æŠ€æœ¯å®ç°**ï¼š
- Windows GDI API (`SetDeviceGammaRamp`)
- pywin32
- keyboardåº“ï¼ˆå…¨å±€å¿«æ·é”®ï¼‰

**æ–‡ä»¶ç»“æ„**ï¼š
```
modules/screen_filter/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ gamma_controller.py    # Windows Gamma Rampæ§åˆ¶
â”œâ”€â”€ preset_manager.py       # é¢„è®¾ç®¡ç†
â”œâ”€â”€ models.py              # æ•°æ®æ¨¡å‹
â””â”€â”€ ui.py                  # UIç»„ä»¶
```

---

### 2. æœ¬åœ°åœ°å›¾ (Local Map) ğŸ“‹ å¾…å®ç°

**åŠŸèƒ½æè¿°**ï¼š
- è¯»å–æ¸¸æˆæˆªå›¾å…ƒæ•°æ®ï¼ˆEXIFï¼‰è·å–åœ°å›¾å’Œä½ç½®ä¿¡æ¯
- åœ¨é¢„è®¾åœ°å›¾ä¸Šæ˜¾ç¤ºç©å®¶ä½ç½®æ ‡è®°
- æ˜¾ç¤ºå‡ºç”Ÿç‚¹ã€æå–ç‚¹ã€ä»»åŠ¡ç‚¹ã€æˆ˜åˆ©å“ç‚¹
- æ”¯æŒè‡ªå®šä¹‰æ ‡è®°å’Œæ³¨é‡Š

**å‚è€ƒé¡¹ç›®**ï¼š
- [TarkovMonitor](https://github.com/CplJKUHN/TarkovMonitor)

**æŠ€æœ¯å®ç°**ï¼š
- PIL/Pillowï¼ˆè¯»å–EXIFæ•°æ®ï¼‰
- tkinter Canvasï¼ˆåœ°å›¾æ¸²æŸ“ï¼‰
- watchdogï¼ˆæ–‡ä»¶ç³»ç»Ÿç›‘æ§ï¼‰

**æ•°æ®æ¥æº**ï¼š
- æ¸¸æˆæˆªå›¾ï¼š`%USERPROFILE%\Documents\Escape from Tarkov\Screenshots\`
- åœ°å›¾èµ„æºï¼šä»tarkov.dev APIè·å–æˆ–æœ¬åœ°é™æ€èµ„æº

**æ–‡ä»¶ç»“æ„**ï¼š
```
modules/local_map/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ screenshot_monitor.py   # ç›‘æ§æˆªå›¾æ–‡ä»¶å¤¹
â”œâ”€â”€ exif_parser.py         # è§£ææˆªå›¾EXIFæ•°æ®
â”œâ”€â”€ map_renderer.py        # åœ°å›¾æ¸²æŸ“å™¨
â”œâ”€â”€ marker_manager.py      # æ ‡è®°ç®¡ç†
â””â”€â”€ ui.py                  # UIç»„ä»¶
```

**EXIFæ•°æ®ç»“æ„**ï¼ˆå‚è€ƒTarkovMonitorï¼‰ï¼š
```
Coordinates: X,Y,Z
Map: Factory/Customs/Woods/etc.
Timestamp: Game time
```

---

### 3. ä»»åŠ¡è¿½è¸ª (Quest Tracker) ğŸ“‹ å¾…å®ç°

**åŠŸèƒ½æè¿°**ï¼š
- æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡åˆ—è¡¨ï¼ˆæŒ‰å•†äººåˆ†ç»„ï¼‰
- æ ‡è®°ä»»åŠ¡å®ŒæˆçŠ¶æ€
- äº‘ç«¯åŒæ­¥ï¼ˆTarkovTracker.org APIï¼‰
- çº¯æœ¬åœ°è¿½è¸ªæ¨¡å¼ï¼ˆå¯é€‰ï¼‰

**APIé›†æˆ**ï¼š
1. **Tarkov.dev GraphQL API**ï¼ˆè·å–ä»»åŠ¡æ•°æ®ï¼‰
   - ç«¯ç‚¹ï¼š`https://api.tarkov.dev/graphql`
   - è·å–ä»»åŠ¡ä¿¡æ¯ã€ç›®æ ‡ã€å¥–åŠ±

2. **TarkovTracker.org API**ï¼ˆäº‘ç«¯åŒæ­¥ï¼‰
   - ç«¯ç‚¹ï¼š`https://tarkovtracker.io/api/`
   - ç”¨æˆ·ç™»å½•ã€ä»»åŠ¡è¿›åº¦åŒæ­¥

**æŠ€æœ¯å®ç°**ï¼š
- requestsï¼ˆHTTPå®¢æˆ·ç«¯ï¼‰
- sqlite3ï¼ˆæœ¬åœ°æ•°æ®åº“ï¼‰
- å¯é€‰ï¼šaiohttpï¼ˆå¼‚æ­¥è¯·æ±‚ï¼‰

**æ–‡ä»¶ç»“æ„**ï¼š
```
modules/quest_tracker/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ tarkov_dev.py      # Tarkov.dev APIå®¢æˆ·ç«¯
â”‚   â””â”€â”€ tarkovtracker.py   # TarkovTracker APIå®¢æˆ·ç«¯
â”œâ”€â”€ database.py            # æœ¬åœ°SQLiteæ•°æ®åº“
â”œâ”€â”€ quest_manager.py       # ä»»åŠ¡ç®¡ç†é€»è¾‘
â”œâ”€â”€ sync_manager.py        # äº‘ç«¯åŒæ­¥ç®¡ç†
â””â”€â”€ ui.py                  # UIç»„ä»¶
```

**æ•°æ®æ¨¡å‹**ï¼š
```python
Quest:
  - id: str
  - trader: str (Prapor, Therapist, etc.)
  - name: str
  - level_required: int
  - objectives: List[Objective]
  - rewards: List[Reward]
  - completed: bool

Objective:
  - description: str
  - completed: bool
  - progress: Optional[int/int]
```

---

## ğŸ—ï¸ é¡¹ç›®ç›®å½•ç»“æ„

```
T2-Tarkov-Toolbox/
â”œâ”€â”€ .claude/                # Claude Codeé…ç½®
â”œâ”€â”€ modules/                # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ screen_filter/      # å±å¹•æ»¤é•œæ¨¡å—
â”‚   â”œâ”€â”€ local_map/          # æœ¬åœ°åœ°å›¾æ¨¡å—
â”‚   â””â”€â”€ quest_tracker/      # ä»»åŠ¡è¿½è¸ªæ¨¡å—
â”œâ”€â”€ core/                   # æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py          # å…¨å±€é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database.py        # æ•°æ®åº“ç®¡ç†
â”‚   â””â”€â”€ utils.py           # å·¥å…·å‡½æ•°
â”œâ”€â”€ ui/                     # UIç»„ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main_window.py     # ä¸»çª—å£ï¼ˆTabViewï¼‰
â”‚   â””â”€â”€ components/        # é€šç”¨UIç»„ä»¶
â”œâ”€â”€ assets/                 # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ maps/              # åœ°å›¾å›¾ç‰‡
â”‚   â””â”€â”€ icons/             # å›¾æ ‡
â”œâ”€â”€ data/                   # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ quests.db          # ä»»åŠ¡æ•°æ®åº“
â”‚   â””â”€â”€ config.json        # å…¨å±€é…ç½®
â”œâ”€â”€ main.py                # ç¨‹åºå…¥å£
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

---

## ğŸ¨ ä¸»UIè®¾è®¡

ä½¿ç”¨ **CustomTkinter** çš„ `CTkTabview` å®ç°å¤šæ¨¡å—åˆ‡æ¢ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  T2 Tarkov Toolbox              [â”€] [â–¡] [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å±å¹•æ»¤é•œ] [åœ°å›¾] [ä»»åŠ¡è¿½è¸ª] [è®¾ç½®]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚              å½“å‰é€‰ä¸­Tabçš„å†…å®¹                â”‚
â”‚                                             â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab 1: å±å¹•æ»¤é•œ
- å·¦ä¾§ï¼šé¢„è®¾åˆ—è¡¨
- å³ä¾§ï¼šå‚æ•°è°ƒæ•´æ»‘å— + æ˜¾ç¤ºå™¨é€‰æ‹©

### Tab 2: åœ°å›¾
- å·¦ä¾§ï¼šåœ°å›¾åˆ—è¡¨ + æ ‡è®°è¿‡æ»¤
- å³ä¾§ï¼šåœ°å›¾ç”»å¸ƒ + ç©å®¶ä½ç½®æ ‡è®°

### Tab 3: ä»»åŠ¡è¿½è¸ª
- å·¦ä¾§ï¼šå•†äººåˆ†ç»„æ ‘å½¢è§†å›¾
- å³ä¾§ï¼šä»»åŠ¡è¯¦æƒ… + è¿›åº¦å‹¾é€‰

### Tab 4: è®¾ç½®
- æˆªå›¾è·¯å¾„é…ç½®
- APIå¯†é’¥é…ç½®
- äº‘ç«¯åŒæ­¥å¼€å…³
- å¿«æ·é”®é…ç½®

---

## ğŸ”„ å¼€å‘é¡ºåº

### Phase 1: æ¶æ„é‡æ„ âœ… å½“å‰
1. âœ… é‡æ„ç°æœ‰å±å¹•æ»¤é•œä»£ç åˆ°æ¨¡å—åŒ–ç»“æ„
2. âœ… å®ç°ä¸»çª—å£TabViewæ¡†æ¶
3. âœ… è¿ç§»å±å¹•æ»¤é•œåˆ°ç¬¬ä¸€ä¸ªTab

### Phase 2: åœ°å›¾æ¨¡å—
1. å®ç°æˆªå›¾æ–‡ä»¶å¤¹ç›‘æ§
2. EXIFæ•°æ®è§£æ
3. åœ°å›¾æ¸²æŸ“å¼•æ“
4. æ ‡è®°ç³»ç»Ÿ

### Phase 3: ä»»åŠ¡è¿½è¸ªæ¨¡å—
1. Tarkov.dev APIé›†æˆ
2. æœ¬åœ°æ•°æ®åº“è®¾è®¡
3. ä»»åŠ¡åˆ—è¡¨UI
4. TarkovTrackeräº‘ç«¯åŒæ­¥ï¼ˆå¯é€‰ï¼‰

### Phase 4: ä¼˜åŒ–å’Œæ‰©å±•
1. æ€§èƒ½ä¼˜åŒ–
2. é”™è¯¯å¤„ç†å®Œå–„
3. ç”¨æˆ·åé¦ˆæ”¶é›†
4. åŠŸèƒ½è¿­ä»£

---

## ğŸ“š æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Python 3.11+**
- **CustomTkinter** - ç°ä»£åŒ–GUIæ¡†æ¶

### Windows API
- **pywin32** - Windows GDI APIï¼ˆGamma Rampï¼‰

### æ•°æ®å¤„ç†
- **Pillow** - å›¾åƒå¤„ç†å’ŒEXIFè¯»å–
- **sqlite3** - æœ¬åœ°æ•°æ®åº“

### ç½‘ç»œè¯·æ±‚
- **requests** - HTTPå®¢æˆ·ç«¯ï¼ˆåŒæ­¥ï¼‰
- **aiohttp** - HTTPå®¢æˆ·ç«¯ï¼ˆå¼‚æ­¥ï¼Œå¯é€‰ï¼‰

### æ–‡ä»¶ç›‘æ§
- **watchdog** - æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶ç›‘æ§

### å…¶ä»–
- **keyboard** - å…¨å±€å¿«æ·é”®
- **darkdetect** - ç³»ç»Ÿä¸»é¢˜æ£€æµ‹

---

## ğŸ” APIå¯†é’¥ç®¡ç†

é…ç½®æ–‡ä»¶ `data/config.json`:
```json
{
  "tarkovtracker": {
    "enabled": false,
    "api_key": ""
  },
  "screenshot_path": "%USERPROFILE%\\Documents\\Escape from Tarkov\\Screenshots",
  "hotkeys": {
    "filter_default": "F2",
    "filter_daytime": "F3",
    "filter_nighttime": "F4"
  }
}
```

---

## ğŸ“ å¾…åŠäº‹é¡¹

- [ ] é‡æ„ç°æœ‰ä»£ç åˆ°æ¨¡å—åŒ–ç»“æ„
- [ ] å®ç°ä¸»çª—å£TabView
- [ ] ç ”ç©¶TarkovMonitorçš„EXIFè§£æå®ç°
- [ ] è®¾è®¡ä»»åŠ¡æ•°æ®åº“Schema
- [ ] æµ‹è¯•Tarkov.dev API
- [ ] è·å–åœ°å›¾èµ„æºæ–‡ä»¶
- [ ] è®¾è®¡äº‘ç«¯åŒæ­¥ç­–ç•¥

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

1. **æœ¬åœ°ä¼˜å…ˆ**: æ‰€æœ‰åŠŸèƒ½åº”èƒ½ç¦»çº¿å·¥ä½œ
2. **è½»é‡é«˜æ•ˆ**: ä½å†…å­˜å ç”¨ï¼Œä¸å½±å“æ¸¸æˆæ€§èƒ½
3. **ç”¨æˆ·å‹å¥½**: ç®€æ´ç›´è§‚çš„UIè®¾è®¡
4. **æ¨¡å—åŒ–**: ä¾¿äºç»´æŠ¤å’Œæ‰©å±•æ–°åŠŸèƒ½
